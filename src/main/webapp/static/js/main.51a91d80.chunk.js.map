{"version":3,"sources":["components/Login.js","Paths.js","components/Nav.js","components/Catalog.js","components/User.js","components/Sell.js","components/Router.js","App.js","index.js"],"names":["Login","window","location","host","show","handleClose","updateUser","useState","login","setLogin","form","setForm","formLoading","setFormLoading","Modal","onHide","Header","Body","Form","onChange","event","target","name","value","onSubmit","preventDefault","stopPropagation","currentTarget","checkValidity","body","username","hashed","SHA256","password","toString","fetch","prefix","method","headers","JSON","stringify","then","res","status","alert","Group","controlId","Label","Control","required","type","placeholder","Row","style","alignItems","Button","className","variant","disabled","cursor","onClick","Nav","setShow","history","useHistory","Navbar","bg","position","expand","Col","md","Brand","as","Link","to","textAlign","Text","push","Catalog","searchitems","items","setItems","page","setPage","Loaded","setLoaded","useEffect","query","sessionStorage","getItem","json","filter","e","sellerName","handlePageChange","newPage","scrollTo","catalogTable","slice","map","item","key","itemid","OverlayTrigger","trigger","placement","overlay","Popover","Content","description","width","price","itemId","handleBuy","Container","fluid","length","Table","hover","Math","ceil","Spinner","animation","User","tab","setTab","orders","setOrders","list","span","offset","defaultActiveKey","onSelect","Item","eventKey","FormData","get","trim","defaultValue","order","buyerName","index","findIndex","handleApprovePurchase","Sell","parseInt","rows","Router","send","useLocation","Switch","path","state","exact","App","addToast","useToasts","setUsername","u","socket","SockJS","pushClient","Stomp","over","debug","connect","subscribe","m","data","parse","console","log","user","appearance","disconnect","basename","process","n","setItem","ReactDOM","render","StrictMode","autoDismiss","document","getElementById"],"mappings":"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","file":"static/js/main.51a91d80.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { Form, Button, Modal } from 'react-bootstrap'\nimport { SHA256 } from 'crypto-js'\nimport { LOGIN_SERVICE_ADDRESS, SIGNUP_SERVICE_ADDRESS } from '../Paths'\n\nexport const Login = ({ show, handleClose, updateUser }) => {\n  const [login, setLogin] = useState(true)\n  const [form, setForm] = useState({})\n  const [formLoading, setFormLoading] = useState(false)\n  const toggleLogin = () => setLogin(!login)\n  const handleInput = event => {\n    setForm({ ...form, [event.target.name]: event.target.value })\n  }\n  const handleSubmit = event => {\n    event.preventDefault()\n    event.stopPropagation()\n    if (event.currentTarget.checkValidity() === true) {\n      setFormLoading(true)\n      const body = { name: form.username }\n      const hashed = SHA256(form.username + ':' + form.password).toString()\n      body.password = hashed\n      // console.info(\n      //   'POST',\n      //   login ? LOGIN_SERVICE_ADDRESS : SIGNUP_SERVICE_ADDRESS,\n      //   body\n      // )\n      fetch(login ? LOGIN_SERVICE_ADDRESS : SIGNUP_SERVICE_ADDRESS, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      }).then(res => {\n        if (res.status === 200) {\n          updateUser(form.username)\n          setFormLoading(false)\n          handleClose()\n        } else {\n          login\n            ? alert('Invalid email/password!')\n            : alert('User already exists!')\n          setFormLoading(false)\n        }\n      })\n    }\n  }\n  return (\n    <Modal show={show} onHide={handleClose}>\n      <Modal.Header>{login ? 'Log in' : 'Sign up'}</Modal.Header>\n      <Modal.Body>\n        <Form onChange={handleInput} onSubmit={handleSubmit}>\n          <Form.Group controlId='email'>\n            <Form.Label>Username</Form.Label>\n            <Form.Control\n              required\n              name='username'\n              type='text'\n              placeholder='Username'\n            />\n          </Form.Group>\n          <Form.Group controlId='password'>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              required\n              name='password'\n              type='password'\n              placeholder='Password'\n            />\n          </Form.Group>\n          <Form.Row style={{ alignItems: 'center' }}>\n            <Button\n              className='mr-auto ml-1'\n              variant='primary'\n              type='submit'\n              disabled={formLoading}\n            >\n              {formLoading ? 'Processing...' : 'Submit'}\n            </Button>\n            <i\n              className='mr-1'\n              style={{ cursor: 'pointer' }}\n              onClick={toggleLogin}\n            >\n              <u>{login ? \"Don't have an account?\" : 'Have an account?'}</u>\n            </i>\n          </Form.Row>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","const prefix =\n  process.env.NODE_ENV === 'development' ? 'http://127.0.0.1:3001' : 'api'\n// 'http://127.0.0.1:8080/api'\n\nexport const ALL_ITEMS_SERVICE_ADDRESS = prefix + '/items'\n\nexport const ITEM_DETAIL_SERVICE_ADDRESS = prefix + '/items/' // itemid\n\nexport const SEARCH_SERVICE_ADDRESS = prefix + '/search' // ?q={search terms}\n\nexport const BUY_ITEM_SERVICE_ADDRESS = prefix + '/buy'\n\nexport const CREATE_ITEM_SERVICE_ADDRESS = prefix + '/sell'\n\nexport const LOGIN_SERVICE_ADDRESS = prefix + '/user/login'\n\nexport const SIGNUP_SERVICE_ADDRESS = prefix + '/user/signup'\n\nexport const USER_INFO_SERVICE_ADDRESS = prefix + '/user/' // username\n\nexport const USER_PASSWORD_SERVICE_ADDRESS = prefix + '/user/password'\n\nexport const USER_APPROVE_PURCHASE_SERVICE_ADDRESS = prefix + '/user/approve'\n\nexport const WEBSOCKET_ADDRESS =\n  'ws://' + window.location.host + process.env.PUBLIC_URL + '/api/push/'\n","import React, { useState } from 'react'\nimport { Navbar, Col } from 'react-bootstrap'\nimport { Link, useHistory } from 'react-router-dom'\nimport { Login } from './Login'\n// import { SEARCH_SERVICE_ADDRESS } from '../Paths'\n\nconst Nav = ({ username, updateUser }) => {\n  const [show, setShow] = useState(false)\n  // const [searchInput, setSearchInput] = useState('')\n  const history = useHistory()\n  const handleClickUser = () => {\n    username ? history.push('/user') : setShow(true)\n  }\n  // const handleSearch = (e) => {\n  //   e.preventDefault()\n  //   e.stopPropagation()\n  //   if (searchInput.trim() === '') return\n  //   console.info(\n  //     'GET ' +\n  //       SEARCH_SERVICE_ADDRESS +\n  //       '?q=' +\n  //       searchInput.trim().replace(' ', '%20')\n  //   )\n  //   fetch(\n  //     SEARCH_SERVICE_ADDRESS + '?q=' + searchInput.trim().replace(' ', '%20')\n  //   )\n  //     .then((res) => res.json())\n  //     .then((res) => {\n  //       if (res.length === 0) {\n  //         alert('No results found!')\n  //         return\n  //       }\n  //       history.push('/', res)\n  //     })\n  // }\n  const handleClose = () => setShow(false)\n\n  return (\n    <>\n      <Navbar bg='primary' position='static' variant='dark' expand>\n        <Col md={3}>\n          <Navbar.Brand as={Link} to='/' className='mr-auto'>\n            USC Marketplace\n          </Navbar.Brand>\n        </Col>\n        <Col md={6}>\n          {/* <Form inline className=\"\" onSubmit={handleSearch}>\n            <FormControl\n              type='text'\n              style={{ width: '90%', marginRight: '-5px' }}\n              placeholder='Search'\n              onChange={e => setSearchInput(e.target.value)}\n            />\n            <Button\n              variant='primary'\n              type='submit'\n              style={{ width: '10%', marginLeft: '-5px', borderRadius: '0px' }}\n            >\n              <ion-icon name='search-outline'></ion-icon>\n            </Button>\n          </Form> */}\n        </Col>\n        <Col md={3} style={{ textAlign: 'right' }}>\n          <Navbar.Text onClick={handleClickUser} style={{ cursor: 'pointer' }}>\n            {username || 'Log in'}\n          </Navbar.Text>\n        </Col>\n      </Navbar>\n      <Login show={show} handleClose={handleClose} updateUser={updateUser} />\n    </>\n  )\n}\n\nexport default Nav\n","import React, { useState, useEffect } from 'react'\nimport {\n  Container,\n  Table,\n  Spinner,\n  Button,\n  OverlayTrigger,\n  Popover,\n} from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\nimport { ALL_ITEMS_SERVICE_ADDRESS } from '../Paths'\n// import ItemCard from './ItemCard'\n// import { ItemModal } from './ItemModal'\nimport { BUY_ITEM_SERVICE_ADDRESS } from '../Paths'\n\nexport const Catalog = ({ username, searchitems }) => {\n  // const [modalItemID, setModalItemID] = useState(-1)\n  const [items, setItems] = useState(searchitems || [])\n  const [page, setPage] = useState(1)\n  const [Loaded, setLoaded] = useState(false)\n  // const handleClick = itemid => {\n  //   setModalItemID(itemid)\n  // }\n\n  const handleBuy = item => {\n    // console.info('POST ' + BUY_ITEM_SERVICE_ADDRESS, {\n    //   itemid: item.itemId,\n    //   username: username,\n    // })\n    fetch(BUY_ITEM_SERVICE_ADDRESS, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        itemid: item.itemId,\n        username: username,\n      }),\n    }).then(res => {\n      if (res.status === 200) {\n        alert('Successful. Waiting for seller approval now.')\n      } else {\n        alert('Item is not available.')\n      }\n    })\n  }\n\n  useEffect(() => {\n    if (searchitems) return\n    const query = sessionStorage.getItem('username')\n      ? '?name=' + sessionStorage.getItem('username')\n      : ''\n    // console.info('GET ' + ALL_ITEMS_SERVICE_ADDRESS + query)\n    fetch(ALL_ITEMS_SERVICE_ADDRESS + query)\n      .then(res => res.json())\n      .then(res => {\n        setLoaded(true)\n        setItems(res.filter(e => e.sellerName !== username))\n      })\n  }, [username])\n\n  // const closeModal = useCallback(() => {\n  //   setModalItemID(-1)\n  // }, [])\n\n  const handlePageChange = newPage => {\n    setPage(newPage)\n    window.scrollTo(0, 0)\n  }\n\n  // const itemCards =\n  //   items &&\n  //   items.slice((page - 1) * 20, page * 20).map(item => (\n  //     <Col key={page + '.' + item.itemid}>\n  //       <ItemCard username={username} item={item} handleClick={handleClick} />\n  //     </Col>\n  //   ))\n\n  const catalogTable =\n    items &&\n    items.slice((page - 1) * 20, page * 20).map(item => (\n      <tr key={item.itemid}>\n        <OverlayTrigger\n          trigger='hover'\n          placement='auto-start'\n          overlay={\n            <Popover>\n              <Popover.Content>{item.description}</Popover.Content>\n            </Popover>\n          }\n        >\n          <td style={{ width: '50%' }}>{item.name}</td>\n        </OverlayTrigger>\n        <td style={{ width: '20%' }}>${item.price}</td>\n        <td style={{ width: '20%' }}>{item.sellerName}</td>\n        {/* <td>{item.description}</td> */}\n        <td style={{ width: '10%' }}>\n          <Button onClick={() => handleBuy(item)} disabled={!username}>\n            Buy now\n          </Button>\n        </td>\n      </tr>\n    ))\n  return (\n    <>\n      <Container fluid='lg' className='my-5'>\n        {username ? (\n          <Button as={Link} to={'/create'} className='mb-3'>\n            Create new listing\n          </Button>\n        ) : (\n          ''\n        )}\n        {Loaded ? (\n          items.length !== 0 ? (\n            <>\n              <Table hover>\n                <thead>\n                  <th>Name</th>\n                  <th>Price</th>\n                  <th>Seller</th>\n                  {/* <th>Description</th> */}\n                  <th></th>\n                </thead>\n                <tbody>{catalogTable}</tbody>\n              </Table>\n              {page !== 1 ? (\n                <Button\n                  onClick={() => handlePageChange(page - 1)}\n                  className='mr-3'\n                >\n                  Previous\n                </Button>\n              ) : (\n                ''\n              )}\n              {page !== Math.ceil(items.length / 20) ? (\n                <Button onClick={() => handlePageChange(page + 1)}>Next</Button>\n              ) : (\n                ''\n              )}\n            </>\n          ) : (\n            <p className='loading-spinner'>No item for you. Sad.</p>\n          )\n        ) : (\n          <Spinner\n            animation='border'\n            variant='primary'\n            className='loading-spinner'\n          />\n        )}\n      </Container>\n      {/* <ItemModal username={username} itemid={modalItemID} close={closeModal} /> */}\n    </>\n  )\n}\n","import { SHA256 } from 'crypto-js'\nimport React, { useState, useEffect } from 'react'\nimport { Nav, Row, Col, Form, Button, Table } from 'react-bootstrap'\nimport {\n  USER_INFO_SERVICE_ADDRESS,\n  USER_PASSWORD_SERVICE_ADDRESS,\n  USER_APPROVE_PURCHASE_SERVICE_ADDRESS,\n} from '../Paths'\n\nexport const User = ({ username }) => {\n  const [tab, setTab] = useState('orders')\n  const [orders, setOrders] = useState([])\n  useEffect(() => {\n    // console.info('GET', USER_INFO_SERVICE_ADDRESS + username)\n    fetch(USER_INFO_SERVICE_ADDRESS + username)\n      .then(res => res.json())\n      .then(res => {\n        setOrders(res)\n      })\n  }, [username])\n  const handlePasswordChange = e => {\n    e.preventDefault()\n    e.stopPropagation()\n    const form = new FormData(e.target)\n    if (form.get('password').trim() === '') {\n      alert('Please enter a valid password')\n      return\n    }\n    // console.info('PUT', USER_PASSWORD_SERVICE_ADDRESS, {\n    //   username: username,\n    //   password: SHA256(username + ':' + form.get('password')).toString(),\n    // })\n    fetch(USER_PASSWORD_SERVICE_ADDRESS, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name: username,\n        password: SHA256(username + ':' + form.get('password')).toString(),\n      }),\n    }).then(res => {\n      if (res.status === 200) {\n        alert('Password changed successfully!')\n      } else {\n        alert('An error has occured! Please try again.')\n      }\n    })\n  }\n  const handleApprovePurchase = order => {\n    // console.info('POST', USER_APPROVE_PURCHASE_SERVICE_ADDRESS, {\n    //   username: username,\n    //   itemid: order.itemId,\n    // })\n    fetch(USER_APPROVE_PURCHASE_SERVICE_ADDRESS, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        username: username,\n        itemid: order.itemId,\n      }),\n    }).then(res => {\n      if (res.status === 200) {\n        alert('Successful')\n        const index = orders.findIndex(e => e.itemId === order.itemId)\n        setOrders([...orders.slice(0, index), ...orders.slice(index + 1)])\n      } else {\n        alert('An error has occured.')\n      }\n    })\n  }\n\n  const orderTable = list =>\n    list &&\n    list.map(order => (\n      <tr key={order.itemId}>\n        <td>{order.name}</td>\n        <td>${order.price}</td>\n        <td>{order.buyerName}</td>\n        <td>\n          <Button onClick={() => handleApprovePurchase(order)}>Approve</Button>\n        </td>\n      </tr>\n    ))\n  return (\n    <>\n      <Row className='mt-5'>\n        <Col md={{ span: 2, offset: 1 }}>\n          <Nav\n            variant='pills'\n            defaultActiveKey='orders'\n            className='flex-column'\n            onSelect={key => setTab(key)}\n          >\n            <Nav.Item>\n              <Nav.Link eventKey='orders'>Requests</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link eventKey='password'>Change password</Nav.Link>\n            </Nav.Item>\n          </Nav>\n        </Col>\n        <Col md={{ span: 6 }} className='ml-5'>\n          {tab === 'password' ? (\n            <>\n              <h3>Change password</h3>\n              <Form onSubmit={handlePasswordChange}>\n                <Form.Group controlId='name'>\n                  <Form.Label>Username</Form.Label>\n                  <Form.Control\n                    type='text'\n                    placeholder='Enter your name'\n                    defaultValue={username}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group controlId='password'>\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    type='password'\n                    placeholder='Password'\n                    name='password'\n                  />\n                </Form.Group>\n                <Button variant='primary' type='submit'>\n                  Save changes\n                </Button>\n              </Form>\n            </>\n          ) : (\n            <>\n              <h3>Incoming Requests</h3>\n              <Table>\n                <thead>\n                  <th>Name</th>\n                  <th>Price</th>\n                  <th>Buyer</th>\n                  <th>Status</th>\n                </thead>\n                <tbody>{orderTable(orders)}</tbody>\n              </Table>\n            </>\n          )}\n        </Col>\n      </Row>\n    </>\n  )\n}\n","import React, { useState } from 'react'\nimport { Button, Container, Form } from 'react-bootstrap'\nimport { useHistory } from 'react-router'\nimport { CREATE_ITEM_SERVICE_ADDRESS } from '../Paths'\nexport const Sell = ({ username }) => {\n  const [form, setForm] = useState({})\n  const [formLoading, setFormLoading] = useState(false)\n  const history = useHistory()\n  //   const handlePictures = ()\n  const handleInput = event => {\n    // if (event.target.name === 'picture') {\n    //   setForm({ ...form, pictures: event.target.files })\n    // } else {\n    if (event.target.name === 'price') {\n      setForm({ ...form, [event.target.name]: parseInt(event.target.value) })\n    } else {\n      setForm({ ...form, [event.target.name]: event.target.value })\n    }\n    // }\n  }\n  // const validateFile = () => {\n  //   const allowedExtensions = /[a-zA-Z0-9]+\\.(jpg|png|jpeg)$/i\n  //   console.log(form.pictures)\n  //   for (let i = 0; i < form.pictures.length; i++) {\n  //     if (!allowedExtensions.test(form.pictures[i].name)) {\n  //       alert('Please upload valid pictures!')\n  //       return false\n  //     }\n  //   }\n  //   return true\n  // }\n  // const handleSubmit = event => {\n  //   event.preventDefault()\n  //   event.stopPropagation()\n  //   if (event.currentTarget.checkValidity() && validateFile()) {\n  //     setFormLoading(true)\n  //     const data = new FormData(event.target)\n  //     console.info('POST', CREATE_ITEM_SERVICE_ADDRESS)\n  //     for (var pair of data.entries()) {\n  //       console.log(pair[0] + ' - ' + pair[1])\n  //     }\n  //     fetch(CREATE_ITEM_SERVICE_ADDRESS, {\n  //       method: 'POST',\n  //       headers: {\n  //         'Content-Type': 'multipart/formdata',\n  //       },\n  //       body: data,\n  //     }).then(res => {\n  //       if (res.status === 200) {\n  //         history.push('/')\n  //       } else {\n  //         alert('An error has occured.')\n  //       }\n  //       setFormLoading(false)\n  //     })\n  //   }\n  // }\n  const handleSubmit = event => {\n    event.preventDefault()\n    event.stopPropagation()\n    if (event.currentTarget.checkValidity()) {\n      setFormLoading(true)\n      // const data = new FormData(event.target)\n      // console.info('POST', CREATE_ITEM_SERVICE_ADDRESS, form)\n      // for (var pair of data.entries()) {\n      //   console.log(pair[0] + ' - ' + pair[1])\n      // }\n      fetch(CREATE_ITEM_SERVICE_ADDRESS, {\n        method: 'POST',\n        headers: {\n          // 'Content-Type': 'multipart/formdata',\n          'Content-Type': 'application/json',\n        },\n        // body: data,\n        body: JSON.stringify({ ...form, username: username }),\n      }).then(res => {\n        if (res.status === 200) {\n          alert('Successful')\n          history.push('/')\n        } else {\n          alert('An error has occured.')\n        }\n        setFormLoading(false)\n      })\n    }\n  }\n  return (\n    <Container fluid='md' className='mt-4'>\n      <h2>Create new listing</h2>\n      <Form onChange={handleInput} onSubmit={handleSubmit}>\n        <Form.Group controlId='name'>\n          <Form.Label>Title</Form.Label>\n          <Form.Control type='text' name='name' required />\n        </Form.Group>\n        <Form.Group controlId='price'>\n          <Form.Label>Price</Form.Label>\n          <Form.Control type='number' name='price' required />\n        </Form.Group>\n        {/* <Form.Group controlId='picture'>\n          <Form.File name='picture' multiple required label='Pictures' />\n        </Form.Group> */}\n        <Form.Group controlId='description'>\n          <Form.Label>Description</Form.Label>\n          <Form.Control as='textarea' rows={5} name='description' required />\n        </Form.Group>\n        <Button type='submit' disabled={formLoading}>\n          Submit\n        </Button>\n      </Form>\n    </Container>\n  )\n}\nnew FormData()\n","import { Route, useLocation } from 'react-router-dom'\nimport React from 'react'\nimport Switch from 'react-bootstrap/esm/Switch'\nimport { Catalog } from './Catalog'\nimport { User } from './User'\nimport { Sell } from './Sell'\n\nexport const Router = ({ username, send }) => {\n  const location = useLocation()\n  return (\n    <Switch className='p-0'>\n      {username && (\n        <Switch>\n          <Route path='/user'>\n            <User username={username} />\n          </Route>\n          <Route path='/create'>\n            <Sell username={username} />\n          </Route>\n        </Switch>\n      )}\n      {location.state ? (\n        <Catalog username={username} searchitems={location.state} />\n      ) : (\n        <Route path='/' exact>\n          <Catalog username={username} />\n        </Route>\n      )}\n    </Switch>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport Nav from './components/Nav'\nimport './App.scss'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Router } from './components/Router'\nimport { useToasts } from 'react-toast-notifications'\n// import { WEBSOCKET_ADDRESS } from './Paths'\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\n\nfunction App() {\n  const { addToast } = useToasts()\n  const [username, setUsername] = useState(null)\n  useEffect(() => {\n    const u = sessionStorage.getItem('username')\n    if (u === username) return\n    setUsername(u)\n  }, [])\n\n  const updateUsername = n => {\n    sessionStorage.setItem('username', n)\n    setUsername(n)\n  }\n\n  useEffect(() => {\n    // if (!username) {\n    //   return\n    // }\n    // console.info('Connecting to push')\n    // console.info(WEBSOCKET_ADDRESS)\n    const socket = new SockJS('/push_notif')\n    const pushClient = Stomp.over(socket)\n    pushClient.debug = () => {}\n    pushClient.connect({}, function () {\n      pushClient.subscribe('/topic/messages', function (m) {\n        const data = JSON.parse(m.body)\n        console.log(data)\n        addToast(data.user + ' just requested to buy ' + data.item + '!', {\n          appearance: 'info',\n        })\n      })\n    })\n    return () => {\n      pushClient.disconnect()\n    }\n  }, [addToast])\n  return (\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Nav username={username} updateUser={updateUsername} />\n      <Router username={username} />\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { ToastProvider } from 'react-toast-notifications'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ToastProvider placement='top-center' autoDismiss={true}>\n      <App />\n    </ToastProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}